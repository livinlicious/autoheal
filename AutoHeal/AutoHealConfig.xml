<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/">

    <!-- Main Config Frame -->
    <Frame name="AutoHealConfigFrame" parent="UIParent" hidden="true" frameStrata="DIALOG" toplevel="true" enableMouse="true" movable="true">
        <Size>
            <AbsDimension x="560" y="480"/>
        </Size>
        <Anchors>
            <Anchor point="CENTER"/>
        </Anchors>
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
            <BackgroundInsets>
                <AbsInset left="11" right="12" top="12" bottom="11"/>
            </BackgroundInsets>
            <TileSize>
                <AbsValue val="32"/>
            </TileSize>
            <EdgeSize>
                <AbsValue val="32"/>
            </EdgeSize>
        </Backdrop>

        <Layers>
            <Layer level="ARTWORK">
                <FontString name="$parentTitle" inherits="GameFontNormal" text="AutoHeal Configuration">
                    <Anchors>
                        <Anchor point="TOP">
                            <Offset>
                                <AbsDimension x="0" y="-16"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <!-- Left Column -->
                <FontString name="$parentPresetsLabel" inherits="GameFontNormalSmall" text="Presets:">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="20" y="-45"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <!-- Right Column -->
                <FontString name="$parentCurrentPreset" inherits="GameFontHighlight" text="Select a preset">
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="200" y="-45"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>

                <!-- Config Field Labels (Right Column) -->
                <FontString name="$parentSpellLabel" inherits="GameFontNormalSmall" text="Spell:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-78"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentSpellRankLabel" inherits="GameFontNormalSmall" text="Rank:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-113"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentHealthLabel" inherits="GameFontNormalSmall" text="Health %:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-148"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentBlockLabel" inherits="GameFontNormalSmall" text="Block Time:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-183"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentCooldownLabel" inherits="GameFontNormalSmall" text="Cooldown:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-218"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentRangeLabel" inherits="GameFontNormalSmall" text="Max Range:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-253"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentRequiresBuffLabel" inherits="GameFontNormalSmall" text="Requires Buff:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-288"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentSelfPreservationLabel" inherits="GameFontNormalSmall" text="Emergency:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-330"/></Offset></Anchor></Anchors>
                </FontString>
                <FontString name="$parentSelfThresholdLabel" inherits="GameFontNormalSmall" text="Emergency Health%:">
                    <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="200" y="-363"/></Offset></Anchor></Anchors>
                </FontString>
            </Layer>
        </Layers>

        <Frames>
            <!-- Left Column: Preset List Container -->
            <Frame name="$parentPresetListFrame">
                <Size>
                    <AbsDimension x="160" y="360"/>
                </Size>
                <Anchors>
                    <Anchor point="TOPLEFT">
                        <Offset>
                            <AbsDimension x="20" y="-70"/>
                        </Offset>
                    </Anchor>
                </Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="4" right="4" top="4" bottom="4"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.8"/>
                </Backdrop>
            </Frame>

            <!-- Right Column: Edit Boxes -->
            <EditBox name="$parentSpellEdit" autoFocus="false" historyLines="0">
                <Size><AbsDimension x="240" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-78"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Enter spell name (e.g. Rejuvenation, Renew, Swiftmend, etc.)");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <EditBox name="$parentSpellRankEdit" autoFocus="false" historyLines="0" numeric="true">
                <Size><AbsDimension x="80" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-113"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Spell rank to use. 0 = highest available rank");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <EditBox name="$parentHealthEdit" autoFocus="false" historyLines="0" numeric="true">
                <Size><AbsDimension x="80" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-148"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Minimum Health% to heal");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <EditBox name="$parentBlockEdit" autoFocus="false" historyLines="0" numeric="true">
                <Size><AbsDimension x="80" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-183"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Seconds to wait until spell is cast on same Unit again\n(Black List Timer for Buffs over 32 Buff-Limit)");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <EditBox name="$parentCooldownEdit" autoFocus="false" historyLines="0" numeric="true">
                <Size><AbsDimension x="80" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-218"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Spell cooldown in seconds");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <EditBox name="$parentRangeEdit" autoFocus="false" historyLines="0" numeric="true">
                <Size><AbsDimension x="80" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-253"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Maximum casting range in yards");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <EditBox name="$parentRequiresBuffEdit" autoFocus="false" historyLines="0">
                <Size><AbsDimension x="240" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-288"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Required buff on Unit to cast spell (e.g. Rejuvenation/Regrowth for Swiftmend).\n(Leaved empty for normal buffs and spells.)");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <CheckButton name="$parentSelfPreservationCheck">
                <Size><AbsDimension x="24" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-332"/></Offset></Anchor></Anchors>
                <NormalTexture file="Interface\Buttons\UI-CheckBox-Up"/>
                <PushedTexture file="Interface\Buttons\UI-CheckBox-Down"/>
                <HighlightTexture file="Interface\Buttons\UI-CheckBox-Highlight" alphaMode="ADD"/>
                <CheckedTexture file="Interface\Buttons\UI-CheckBox-Check"/>
                <Scripts>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("If enabled, will prioritize yourself to heal if own HP are low.");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </CheckButton>

            <EditBox name="$parentSelfThresholdEdit" autoFocus="false" historyLines="0" numeric="true">
                <Size><AbsDimension x="80" y="24"/></Size>
                <Anchors><Anchor point="TOPLEFT"><Offset><AbsDimension x="300" y="-363"/></Offset></Anchor></Anchors>
                <Backdrop bgFile="Interface\Tooltips\UI-Tooltip-Background" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                    <EdgeSize><AbsValue val="16"/></EdgeSize>
                    <TileSize><AbsValue val="16"/></TileSize>
                    <BackgroundInsets><AbsInset left="5" right="5" top="5" bottom="5"/></BackgroundInsets>
                    <Color r="0" g="0" b="0" a="0.9"/>
                </Backdrop>
                <FontString inherits="ChatFontNormal"><Color r="1" g="1" b="1"/></FontString>
                <Scripts>
                    <OnLoad>this:SetTextInsets(10, 10, 0, 0);</OnLoad>
                    <OnEscapePressed>this:ClearFocus();</OnEscapePressed>
                    <OnEnterPressed>this:ClearFocus();</OnEnterPressed>
                    <OnEnter>
                        GameTooltip:SetOwner(this, "ANCHOR_RIGHT");
                        GameTooltip:SetText("Emergency self-heal threshold in Health%");
                        GameTooltip:Show();
                    </OnEnter>
                    <OnLeave>GameTooltip:Hide();</OnLeave>
                </Scripts>
            </EditBox>

            <!-- Buttons -->
            <Button name="$parentNewButton" inherits="GameMenuButtonTemplate" text="New">
                <Size><AbsDimension x="70" y="22"/></Size>
                <Anchors><Anchor point="BOTTOMLEFT"><Offset><AbsDimension x="25" y="15"/></Offset></Anchor></Anchors>
                <Scripts><OnClick>AutoHeal_NewPreset();</OnClick></Scripts>
            </Button>

            <Button name="$parentDeleteButton" inherits="GameMenuButtonTemplate" text="Delete">
                <Size><AbsDimension x="70" y="22"/></Size>
                <Anchors><Anchor point="BOTTOMLEFT"><Offset><AbsDimension x="105" y="15"/></Offset></Anchor></Anchors>
                <Scripts><OnClick>AutoHeal_DeletePreset();</OnClick></Scripts>
            </Button>

            <Button name="$parentSaveButton" inherits="GameMenuButtonTemplate" text="Save">
                <Size><AbsDimension x="100" y="25"/></Size>
                <Anchors><Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="-120" y="15"/></Offset></Anchor></Anchors>
                <Scripts><OnClick>AutoHeal_SavePreset();</OnClick></Scripts>
            </Button>

            <Button name="$parentCloseButton" inherits="GameMenuButtonTemplate" text="Close">
                <Size><AbsDimension x="100" y="25"/></Size>
                <Anchors><Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="-15" y="15"/></Offset></Anchor></Anchors>
                <Scripts><OnClick>AutoHealConfigFrame:Hide();</OnClick></Scripts>
            </Button>
        </Frames>

        <Scripts>
            <OnLoad>AutoHeal_ConfigOnLoad();</OnLoad>
            <OnShow>AutoHeal_ConfigOnShow();</OnShow>
            <OnMouseDown>this:StartMoving();</OnMouseDown>
            <OnMouseUp>this:StopMovingOrSizing();</OnMouseUp>
        </Scripts>
    </Frame>

</Ui>
